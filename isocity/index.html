<!DOCTYPE html>
<html lang="cs">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>IsoCity</title>
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <div id="hud">
    <div id="hudLeft">
      <div class="hudRow">
        <span class="hudLabel">Hráč:</span> <span id="hudUser">-</span>
      </div>
      <div class="hudRow">
        <span class="hudLabel">Zlato:</span> <span id="hudGold">0</span>
        <span class="hudSep">•</span>
        <span class="hudLabel">Dřevo:</span> <span id="hudWood">0</span>
        <span class="hudSep">•</span>
        <span class="hudLabel">Gemy:</span> <span id="hudGems">0</span>
      </div>
      <div class="hudRow hudSmall">
        <span id="hudWorld"></span>
      </div>
      <div class="hudRow hudSmall" id="hudStatus"></div>
    </div>

    <div id="hudRight">
      <button id="btnMenu" class="iconBtn" aria-label="Menu">☰</button>
      <button id="btnRecenter" class="iconBtn" aria-label="Na střed">◎</button>
    </div>
  </div>

  <canvas id="canvas"></canvas>

  <div id="dpad" aria-label="Pohyb mapy">
    <button id="panUp" class="padBtn">▲</button>
    <div class="padMid">
      <button id="panLeft" class="padBtn">◀</button>
      <button id="panRight" class="padBtn">▶</button>
    </div>
    <button id="panDown" class="padBtn">▼</button>
  </div>

  <div id="menu" class="hidden">
    <div id="menuCard">
      <div class="menuHeader">
        <div class="menuTitle">Menu</div>
        <button id="btnMenuClose" class="iconBtn" aria-label="Zavřít">✕</button>
      </div>

      <div class="menuSection">
        <div class="menuSectionTitle">Přihlášení</div>
        <label class="menuLabel">API_BASE</label>
        <input id="inpApiBase" class="menuInput" placeholder="https://city.api..." />
        <label class="menuLabel">USER_ID</label>
        <input id="inpUserId" class="menuInput" placeholder="např. test123" />
        <div class="menuRow">
          <button id="btnSaveSession" class="menuBtn">Uložit & načíst</button>
          <button id="btnNewGame" class="menuBtn">Nový hráč</button>
        </div>
      </div>

      <div class="menuSection">
        <div class="menuSectionTitle">Vývoj / reset</div>
        <div class="menuRow">
          <button id="btnDevReset" class="menuBtn danger">Reset hry</button>
        </div>
        <div class="menuHint">(vyžaduje backend s <code>ALLOW_DEV_ENDPOINTS=1</code>)</div>
      </div>

      <div class="menuSection">
        <div class="menuSectionTitle">Obchod</div>
        <label class="menuLabel">Připsat gemy</label>
        <div class="menuRow">
          <input id="inpCreditGems" class="menuInput" inputmode="numeric" value="100" />
          <button id="btnCreditGems" class="menuBtn">Koupit</button>
        </div>
        <div class="menuHint">(vyžaduje backend s <code>ENABLE_SHOP_ENDPOINTS=1</code>)</div>
      </div>

      <div class="menuSection">
        <div class="menuSectionTitle">Gemy → svět / čas</div>

        <label class="menuLabel">Rozšířit svět (kroky)</label>
        <div class="menuRow">
          <input id="inpExpandSteps" class="menuInput" inputmode="numeric" value="1" />
          <button id="btnExpandGems" class="menuBtn">Rozšířit</button>
        </div>
        <div class="menuHint">(aktuálně je <code>/expand_gems</code> a <code>/speedup_upgrade</code> v DEV režimu)</div>

        <div class="menuDivider"></div>
        <div class="menuSectionTitle">Zrychlit upgrade vybrané budovy</div>
        <div class="menuRow">
          <button id="btnSpeedupFinish" class="menuBtn">Dokončit</button>
          <button id="btnSpeedup5m" class="menuBtn">-5 minut</button>
        </div>
        <div class="menuHint">Vyber budovu s probíhajícím upgradem klepnutím na ni.</div>
      </div>

      <div class="menuSection">
        <div class="menuSectionTitle">Sdílené město</div>

        <label class="menuLabel">Pozvat hráče (role)</label>
        <div class="menuRow">
          <select id="inpInviteRole" class="menuInput">
            <option value="editor">Editor</option>
            <option value="viewer">Viewer</option>
          </select>
          <button id="btnCreateInvite" class="menuBtn">Vytvořit pozvánku</button>
        </div>
        <label class="menuLabel">Invite token</label>
        <input id="inpInviteToken" class="menuInput" placeholder="token se objeví zde…" />
        <div class="menuRow">
          <button id="btnShareInvite" class="menuBtn">Sdílet pozvánku</button>
        </div>

        <div class="menuRow">
          <button id="btnAcceptInvite" class="menuBtn">Připojit se</button>
        </div>
      </div>

    </div>
  </div>

  <script defer src="js/iso_config.js"></script>
  <script defer src="js/iso_api_state.js"></script>
  <script defer src="js/iso_render.js"></script>
  <script defer src="js/iso_input_ui.js"></script>
  <script defer src="js/main.js"></script>
</body>

</html>